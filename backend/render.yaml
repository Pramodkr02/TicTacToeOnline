services:
  - type: web
    name: nakama-backend
    env: docker
    plan: starter
    dockerfilePath: backend/Dockerfile
    envVars:
      - key: NAKAMA_DATABASE_DSN
        # Prefer a full DSN from your managed DB: e.g. Render Postgres or Cockroach
        # Example (Render Postgres): postgres://USER:PASSWORD@HOST:PORT/DBNAME?sslmode=require
        # Example (Cockroach Cloud): postgres://USER:PASSWORD@HOST:26257/defaultdb?sslmode=verify-full
        sync: false
      - key: NAKAMA_DATABASE_NAME
        value: nakama
      - key: NAKAMA_DATABASE_ADDRESS
        # Optional: fallback if you do not supply a DSN
        value: root@localhost:26257
      - key: EMAIL_WEBHOOK_URL
        sync: false
      - key: EMAIL_SUBJECT_PREFIX
        value: "[Nakama] "
    healthCheckPath: /
